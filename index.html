<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dutch Vocabulary - è·å…°è¯­è®°å¿†æ›²çº¿</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ‡³ğŸ‡± è·å…°è¯­å•è¯è®°å¿†</h1>
            <div class="stats">
                <span id="due-count">0</span> å¾…å¤ä¹  | 
                <span id="total-count">0</span> æ€»è¯æ±‡
            </div>
            <div id="progress-info" class="progress-info"></div>
        </header>

        <nav class="tabs">
            <button class="tab active" data-tab="review">å¤ä¹ </button>
            <button class="tab" data-tab="add">æ·»åŠ å•è¯</button>
            <button class="tab" data-tab="list">è¯æ±‡è¡¨</button>
        </nav>

        <!-- Review Tab -->
        <section id="review-tab" class="tab-content active">
            <div id="no-cards" class="empty-state">
                <p>ğŸ‰ æ²¡æœ‰å¾…å¤ä¹ çš„å•è¯ï¼</p>
                <p>å»æ·»åŠ ä¸€äº›æ–°å•è¯å§</p>
            </div>
            
            <div id="card-container" class="card" style="display:none;">
                <div class="card-front" id="card-front">
                    <div class="word-type" id="word-type"></div>
                    <div class="word" id="word-dutch"></div>
                    <div class="word-forms" id="word-forms"></div>
                    <button class="speak-btn" id="speak-btn">ğŸ”Š å‘éŸ³</button>
                    <button class="show-btn" id="show-answer">æ˜¾ç¤ºç­”æ¡ˆ</button>
                </div>
                
                <div class="card-back" id="card-back" style="display:none;">
                    <div class="word-type" id="word-type-back"></div>
                    <div class="word" id="word-dutch-back"></div>
                    <div class="word-forms" id="word-forms-back"></div>
                    <button class="speak-btn" id="speak-btn-back">ğŸ”Š å‘éŸ³</button>
                    <div class="translation" id="word-chinese"></div>
                    <div class="example">
                        <div class="example-dutch" id="example-dutch"></div>
                        <div class="example-chinese" id="example-chinese"></div>
                    </div>
                    
                    <div class="rating-buttons">
                        <button class="rating again" data-rating="1">ğŸ˜µ å¿˜äº†</button>
                        <button class="rating hard" data-rating="2">ğŸ˜“ å›°éš¾</button>
                        <button class="rating good" data-rating="3">ğŸ˜Š è®°å¾—</button>
                        <button class="rating easy" data-rating="4">ğŸ˜ ç®€å•</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Add Word Tab -->
        <section id="add-tab" class="tab-content">
            <form id="add-form">
                <div class="form-group">
                    <label>è¯æ€§</label>
                    <select id="word-type-input">
                        <option value="noun-de">åè¯ (de)</option>
                        <option value="noun-het">åè¯ (het)</option>
                        <option value="verb">åŠ¨è¯</option>
                        <option value="adjective">å½¢å®¹è¯</option>
                        <option value="adverb">å‰¯è¯</option>
                        <option value="other">å…¶ä»–</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>è·å…°è¯­å•è¯</label>
                    <input type="text" id="dutch-input" placeholder="ä¾‹ï¼šhuis" required>
                </div>
                
                <div class="form-group noun-only">
                    <label>å¤æ•°å½¢å¼</label>
                    <input type="text" id="plural-input" placeholder="ä¾‹ï¼šhuizen">
                </div>
                
                <!-- Verb conjugation fields -->
                <div class="form-group verb-only">
                    <label class="section-label">ğŸ“ ç°åœ¨æ—¶äººç§°å˜ä½</label>
                    <div class="conjugation-grid">
                        <div class="conj-item">
                            <span class="pronoun">ik</span>
                            <input type="text" id="conj-ik" placeholder="ä¾‹ï¼šeet">
                        </div>
                        <div class="conj-item">
                            <span class="pronoun">jij/je</span>
                            <input type="text" id="conj-jij" placeholder="ä¾‹ï¼šeet">
                        </div>
                        <div class="conj-item">
                            <span class="pronoun">hij/zij/het</span>
                            <input type="text" id="conj-hij" placeholder="ä¾‹ï¼šeet">
                        </div>
                        <div class="conj-item">
                            <span class="pronoun">wij/we</span>
                            <input type="text" id="conj-wij" placeholder="ä¾‹ï¼šeten">
                        </div>
                        <div class="conj-item">
                            <span class="pronoun">jullie</span>
                            <input type="text" id="conj-jullie" placeholder="ä¾‹ï¼šeten">
                        </div>
                        <div class="conj-item">
                            <span class="pronoun">zij/ze</span>
                            <input type="text" id="conj-zij" placeholder="ä¾‹ï¼šeten">
                        </div>
                    </div>
                </div>
                
                <div class="form-group verb-only">
                    <label class="section-label">â° è¿‡å»æ—¶å’Œå®Œæˆæ—¶</label>
                    <div class="tense-grid">
                        <div class="tense-item">
                            <label>è¿‡å»æ—¶ (verleden tijd)</label>
                            <input type="text" id="past-tense" placeholder="ä¾‹ï¼šat / aten">
                        </div>
                        <div class="tense-item">
                            <label>è¿‡å»åˆ†è¯ (voltooid deelwoord)</label>
                            <input type="text" id="past-participle" placeholder="ä¾‹ï¼šgegeten">
                        </div>
                        <div class="tense-item">
                            <label>åŠ©åŠ¨è¯</label>
                            <select id="auxiliary-verb">
                                <option value="hebben">hebben (æœ‰)</option>
                                <option value="zijn">zijn (æ˜¯)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ä¸­æ–‡æ„æ€</label>
                    <input type="text" id="chinese-input" placeholder="ä¾‹ï¼šæˆ¿å­" required>
                </div>
                
                <div class="form-group">
                    <label>ä¾‹å¥ï¼ˆè·å…°è¯­ï¼‰</label>
                    <input type="text" id="example-dutch-input" placeholder="ä¾‹ï¼šHet huis is groot.">
                </div>
                
                <div class="form-group">
                    <label>ä¾‹å¥ï¼ˆä¸­æ–‡ï¼‰</label>
                    <input type="text" id="example-chinese-input" placeholder="ä¾‹ï¼šè¿™æˆ¿å­å¾ˆå¤§ã€‚">
                </div>
                
                <button type="submit" class="submit-btn">æ·»åŠ å•è¯</button>
            </form>
            
            <div id="add-success" class="success-msg" style="display:none;">
                âœ… å•è¯æ·»åŠ æˆåŠŸï¼
            </div>
        </section>

        <!-- Word List Tab -->
        <section id="list-tab" class="tab-content">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="æœç´¢å•è¯...">
            </div>
            <div id="word-list"></div>
        </section>
    </div>

    <script src="app.js"></script>
    
    <!-- è¯Šæ–­é¢æ¿ -->
    <div id="debug-panel" style="
        position: fixed;
        bottom: 10px;
        left: 10px;
        right: 10px;
        background: #1a1a2e;
        color: #4fc3f7;
        padding: 12px;
        border-radius: 12px;
        font-size: 12px;
        font-family: monospace;
        max-height: 150px;
        overflow-y: auto;
        z-index: 9999;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    ">
        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
            <strong>ğŸ” è¯Šæ–­é¢æ¿</strong>
            <button onclick="this.parentElement.parentElement.remove()" style="background:none;border:none;color:#ff6b6b;cursor:pointer;">âœ• å…³é—­</button>
        </div>
        <div id="debug-content">æ£€æµ‹ä¸­...</div>
    </div>
    <script>
        // è¯Šæ–­è„šæœ¬
        (function() {
            const panel = document.getElementById('debug-content');
            const results = [];
            
            // 1. æ£€æŸ¥ localStorage æ˜¯å¦å¯ç”¨
            try {
                localStorage.setItem('_test_', '1');
                localStorage.removeItem('_test_');
                results.push('âœ… localStorage å¯ç”¨');
            } catch(e) {
                results.push('âŒ localStorage ä¸å¯ç”¨: ' + e.message);
            }
            
            // 2. æ£€æŸ¥å½“å‰å­˜å‚¨çš„æ•°æ®
            const rawData = localStorage.getItem('dutch-vocab-data');
            if (rawData) {
                try {
                    const data = JSON.parse(rawData);
                    results.push(`âœ… å·²å­˜å‚¨ ${data.words?.length || 0} ä¸ªå•è¯`);
                    
                    // æ£€æŸ¥æ¯ä¸ªå•è¯çš„çŠ¶æ€
                    if (data.words && data.words.length > 0) {
                        const now = Date.now();
                        const dueCount = data.words.filter(w => !w.nextReview || w.nextReview <= now).length;
                        const reviewedCount = data.words.filter(w => w.lastReview).length;
                        results.push(`ğŸ“Š å¾…å¤ä¹ : ${dueCount}, å·²å¤ä¹ è¿‡: ${reviewedCount}`);
                        
                        // æ˜¾ç¤ºç¬¬ä¸€ä¸ªå•è¯çš„è¯¦ç»†çŠ¶æ€
                        const w = data.words[0];
                        results.push(`ğŸ“ ${w.dutch}: rep=${w.repetitions}, lastReview=${w.lastReview ? new Date(w.lastReview).toLocaleTimeString() : 'æ— '}`);
                    }
                } catch(e) {
                    results.push('âŒ æ•°æ®è§£æé”™è¯¯: ' + e.message);
                }
            } else {
                results.push('âš ï¸ æ— å­˜å‚¨æ•°æ® (é¦–æ¬¡è®¿é—®æˆ–å·²æ¸…é™¤)');
            }
            
            // 3. æ£€æŸ¥é¡µé¢åŠ è½½æ—¶é—´
            results.push(`ğŸ• é¡µé¢åŠ è½½: ${new Date().toLocaleTimeString()}`);
            
            // 4. æ£€æŸ¥æ˜¯å¦æ˜¯æ— ç—•æ¨¡å¼
            if (navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome')) {
                results.push('âš ï¸ Safari æ— ç—•æ¨¡å¼ä¼šç¦ç”¨ localStorage');
            }
            
            panel.innerHTML = results.join('<br>');
        })();
    </script>
</body>
</html>
